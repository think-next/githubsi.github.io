---
title: hugo 博客本地编辑提效
date: 2024-08-24
author: 付辉

---

之前也梳理过 hugo 博客的内容，前前后后好多次，它是一个好的编辑工具，但也不是一个特别好的工具。关键在于门槛，适用人群限定在技术人中。我作为靠写写代码赚生活的人，在马上奔 34 的年纪，反而觉得 hugo 是一片净土。

写一写无伤大雅的内容，写一点小小的总结思考，无论是否还会重读这篇内容，过程的时间确实是消遣掉了，把时间消耗在码字上，就类似很多靠写作赚生活的人一样，也应该算是一种不同的体验。打字的过程算是一种武力输出，输出的强弱很重要，但持续其实更重要。


## 仓库合并，保留一个项目

![仓库现状](./images/src-repos.png)

当前项目下的两个仓库用来做博客这件事，其中一个是 hugo 项目，另一个就是服务 github page 的项目，两个项目也算得上是父子关系。但其实没必要分的那么清楚，分成两个项目只是徒劳地给代码提交带来了很多不便。

我们计划将其合并成一个项目，网上有人的做法是：一个项目，两个分支。其中一个用来保存hugo项目，另一个用来保存 public 的结果。这两个分支内容可谓是天差地别，不过也没有那么重要。这样的话，两个分支其实需要分别提交，各自提交各自的。

![两个分支模式](./images/repo-branch.png)

聪明的你应该已经想到，hugo 项目最终的产出其实是项目下的 public 目录，我们直接用 public 作为仓库，将 hugo 项目作为 public 的一个子目录，hugo 每次编译的时候将产出路径指定为当前目录的父目录。

我其实也是这么想的，但这种方法行不通。文件的变更确确实实生效了，但是访问博客的时候却访问不到新编译的变更。这很奇怪，但是也不知道其中原理。除非你将这个目录指定为隐藏目录，就像我下面的这样，这样最终才是生效的。

![不可见目录](./images/hugo-dir.png)

现在的方案解决了一个问题，但引入了另一个问题。不可见项目本身很难查看，现在使用编译器单独打开截图中的 .hugo_doc 目录就非常困难。不过，也不是没有办法，这些困难本身都不是困难。

折腾了半天，我总结这几种模式没有优劣之分，效率提升上基本毫无差别，主要还是看个人的喜好，最终我计划使用第二种模式：一个项目，两个分支。